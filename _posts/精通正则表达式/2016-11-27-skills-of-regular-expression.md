---
layout: post
title: 正则表达式的平衡法则
categories: 文本编辑
tag: 正则表达式
---

* content
{:toc}


### 正则表达式的平衡法则

**好的正则表达式必须在以下方面求得平衡:**

- 只匹配期望的文本，排除不期望的文本。
- 必须易于控制和理解。
- 如果使用NFA引擎，必须保证效率（如果能够匹配，必须很快地返回匹配结果，如果不能匹配，应该在尽可能短的时间内报告匹配失败。）

#### 匹配IP地址

**对于NFA引擎：应选择尽可能少的分支，以保证效率**

#### 处理文件名

	eg. /usr/local/bin/perl

- 去掉文件名开头的路径

	Perl ` $f =~ s{^.*/}{} `

- 从路径中获取文件名

	` [^/]*$ ` （*这个表达式的不足之处在于：它在锚定到最后之间，会进行非常多的回溯*）

- 所在路径和文件名
	
	` ^(.*)/([^/]*$ ` （*这个表达式的不足之处在于：无法匹配不包含路径的文件名，如：file.txt*）

#### 匹配对称的括号

***

` .* ` 通常不是合适的选择，因为它非常可能会匹配过多的内容。

***

#### 匹配分隔符之内的文本

    1. 匹配起始分隔符
    2. 匹配正文
    3. 匹配结束分隔符

#### 容许引文字符串中出现转义引号

没看懂

#### 去除文本首尾的空白字符

    ```
    1. s/^\s+//;
    2. s/\s+$//;

    ```


	 	

